<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <link rel="stylesheet" type="text/css" media="all" href="icongrid.css"/>
  <script type="text/javascript" src="base32.js"></script>
  <script type="text/javascript" src="jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="icongrid.js"></script>
  </head>

  <body>
        <div class="dashboardclipper" style="width: 300px; height: 200px;" id="clipper">
        <!-- 
          <div class="dashboard" id="dashboard">
            <div class="page" id="page0">
            </div>
          </div>
        -->
        </div>
  </body>

  <script type="text/javascript">
    var myDash;
    var myLayout;
    var html_datasource;

    function onfocus(event) {
      myDash.refresh();
    }

    $(document).ready(function() {
      html_datasource = {

        iconList: {
          strawberry: {
            itemTitle: "Strawberry",
            itemImgURL: "images/strawberry.png"
          },
          watermelon: {
            itemTitle: "Watermelon",
            itemImgURL: "images/watermelon.png"
          },
          apple: {
            itemTitle: "Apple",
            itemImgURL: "images/apple.png"
          },
          banana: {
            itemTitle: "Banana",
            itemImgURL: "images/banana.png"
          },
          grape: {
            itemTitle: "Grape",
            itemImgURL: "images/grape.png"
          },
          orange: {
            itemTitle: "Orange",
            itemImgURL: "images/orange.png"
          },
          papaya: {
            itemTitle: "Papaya",
            itemImgURL: "images/papaya.png"
          },
          pineapple: {
            itemTitle: "Pineapple",
            itemImgURL: "images/pineapple.png"
          }
        },

        // handle requests for the dashboardstate
        loadIconGridState: function(callback) {
          callback(localStorage.getItem("fruitGrid"));
        },

        saveIconGridState: function(state) {
          localStorage.setItem("fruitGrid", state);
        },

        getItemList: function(callback) {
          var list = this.iconList;

          // Add special one
          list["about:icongrid"] = {};
          callback(list);
        },

        openItem: function(itemID) {
          var title = this.iconList[itemID]['itemTitle'];
          if (!title) title = "about:icongrid";
          alert("You clicked on " + title + "!");
        },

        // if all your items have 'itemImgURL' and 'itemTitle' properties, then you don't need to implement these.
        // These get called when an item doesn't have the right properties.
        // Note that you can pass in data URIs for icons
        getItemImgURL: function(itemID) {
          if (itemID == "about:icongrid") return "http://www.publicpress.org/images/about48.png"
        },

        getItemTitle: function(itemID) {
          if (itemID == "about:icongrid") return "About Icongrid";
        }

      };

      var hostElement = $("#clipper");
      myLayout = new GridLayout(hostElement.width(), hostElement.height(), 3, 2);
      myDash = new IconGrid("mydash", hostElement, html_datasource, myLayout);

      myDash.initialize();
      myDash.refresh();
    });
  </script>
</html>
